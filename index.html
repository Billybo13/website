<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI + Humanity</title>
<style>
html, body {
  margin: 0;
  padding: 0;
  overflow: hidden;
  background: black;
  color: white;
  height: 100%;
}
canvas {
  position: fixed;
  top: 0;
  left: 0;
  z-index: -1;
}
.carousel-container {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  perspective: 2000px;
  width: 80vw;
  height: 30vh;
}
.carousel {
  width: 100%;
  height: 100%;
  transform-style: preserve-3d;
  animation: rotate 24s linear infinite;
}
.carousel-panel {
  position: absolute;
  width: 80vw;
  height: 30vh;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 2.2vw;
  font-weight: bold;
  text-align: center;
  padding: 2vw;
  box-sizing: border-box;
  background: rgba(0, 0, 0, 0.4);
  border-radius: 1vw;
  backdrop-filter: blur(4px);
}
@keyframes rotate {
  from { transform: rotateY(0deg); }
  to { transform: rotateY(-360deg); }
}
button {
  position: fixed;
  top: 1rem;
  left: 1rem;
  padding: 0.5rem 1rem;
  font-size: 1rem;
  background: teal;
  border: none;
  border-radius: 0.5rem;
  color: white;
  cursor: pointer;
  z-index: 10;
}
</style>
</head>
<body>
<canvas id="bg"></canvas>

<div class="carousel-container">
  <div class="carousel" id="carousel"></div>
</div>

<button id="toggleAudio">Play</button>

<script>
const quotes = [
  "AI will enhance human creativity, not replace it.",
  "Technology can amplify empathy and understanding.",
  "The future is built on collaboration between humans and machines.",
  "Artificial intelligence will help us solve global challenges.",
  "Automation can free humanity to focus on what matters most.",
  "AI can guide us toward sustainable innovation."
];

// Build carousel
const carousel = document.getElementById('carousel');
const panelCount = quotes.length;
const panelWidth = 0.8 * window.innerWidth; // 80vw
const radius = Math.round((panelWidth / 2) / Math.tan(Math.PI / panelCount));

quotes.forEach((quote, i) => {
  const panel = document.createElement('div');
  panel.className = 'carousel-panel';
  panel.textContent = quote;
  const angle = (360 / panelCount) * i;
  panel.style.transform = `rotateY(${angle}deg) translateZ(${radius}px)`;
  carousel.appendChild(panel);
});

// Particle setup
const canvas = document.getElementById('bg');
const ctx = canvas.getContext('2d');
let particles = [];
function resizeCanvas() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
window.addEventListener('resize', resizeCanvas);
resizeCanvas();

class Particle {
  constructor(x, y, vx, vy, size, color) {
    this.x = x; this.y = y;
    this.vx = vx; this.vy = vy;
    this.size = size;
    this.color = color;
  }
  update() {
    this.x += this.vx;
    this.y += this.vy;
    if (this.x < 0 || this.x > canvas.width || this.y < 0 || this.y > canvas.height) {
      this.x = Math.random() * canvas.width;
      this.y = Math.random() * canvas.height;
    }
  }
  draw() {
    ctx.beginPath();
    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
    ctx.fillStyle = this.color;
    ctx.fill();
  }
}

for (let i = 0; i < 200; i++) {
  particles.push(new Particle(
    Math.random() * canvas.width,
    Math.random() * canvas.height,
    (Math.random() - 0.5) * 0.3,
    (Math.random() - 0.5) * 0.3,
    Math.random() * 1.5,
    'white'
  ));
}

// Mouse tracking
let mouseX = canvas.width / 2;
let mouseY = canvas.height / 2;
document.addEventListener('mousemove', e => {
  mouseX = e.clientX;
  mouseY = e.clientY;
});

// Audio setup
let audioCtx, analyser, dataArray, source;
let isPlaying = false;
const audioBtn = document.getElementById('toggleAudio');

audioBtn.addEventListener('click', () => {
  if (!isPlaying) {
    if (!audioCtx) {
      audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      analyser = audioCtx.createAnalyser();
      analyser.fftSize = 256;
      dataArray = new Uint8Array(analyser.frequencyBinCount);

      fetch('goldberg_variations.mp3')
        .then(res => res.arrayBuffer())
        .then(buf => audioCtx.decodeAudioData(buf))
        .then(decoded => {
          source = audioCtx.createBufferSource();
          source.buffer = decoded;
          source.connect(analyser);
          analyser.connect(audioCtx.destination);
          source.start(0);
          isPlaying = true;
          audioBtn.textContent = 'Pause';
        });
    } else {
      audioCtx.resume();
      isPlaying = true;
      audioBtn.textContent = 'Pause';
    }
  } else {
    audioCtx.suspend();
    isPlaying = false;
    audioBtn.textContent = 'Play';
  }
});

function animate() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // Update particles
  let bass = 0, mid = 0, treble = 0;
  if (isPlaying && analyser) {
    analyser.getByteFrequencyData(dataArray);
    const bassEnd = Math.floor(dataArray.length * 0.1);
    const midEnd = Math.floor(dataArray.length * 0.4);
    bass = avg(dataArray.slice(0, bassEnd));
    mid = avg(dataArray.slice(bassEnd, midEnd));
    treble = avg(dataArray.slice(midEnd));
  }

  particles.forEach(p => {
    // Gentle pull toward mouse
    p.vx += (mouseX - p.x) * 0.00001;
    p.vy += (mouseY - p.y) * 0.00001;

    // Music bursts
    p.vx += (Math.random() - 0.5) * (bass / 5000);
    p.vy += (Math.random() - 0.5) * (treble / 8000);

    p.update();
    p.draw();
  });

  requestAnimationFrame(animate);
}

function avg(arr) {
  let sum = 0;
  for (let v of arr) sum += v;
  return sum / arr.length;
}

animate();
</script>
</body>
</html>
